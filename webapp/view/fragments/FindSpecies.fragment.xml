<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:u="sap.ui.unified">
 
    <Dialog 
    	title = "Find Species"
    	id="dialogFindSpecies"
    	contentWidth="80em"
    	beforeOpen="onDialogFindSpeciesBeforeOpen"
    	>
 
	    <content>
	    	<VBox
				class="sapUiSmallMargin">
	    		
	    		<HBox
		    		class="sapUiSmallMarginBottom">
		    		
		    		<VBox
		    			class="sapUiSmallMarginEnd">
			    		<Label
			    			text="Botanical name"/>
				    	<HBox>
					    	<Input
					    		maxLength="40"
					    		width="15em"
					    		autocomplete="true" 
					    		submit="onButtonFindSpecies"
					    		id="inputFindSpecies"
					    		class="sapUiTinyMarginEnd"/>
					    	<Button
					    		text="Search"
					    		press="onButtonFindSpecies"/>
				    	</HBox>
			    	</VBox>
			    	
			    	<VBox>
				    	<CheckBox
				    		id="cbFindSpeciesIncludeKew"
				    		selected="false"
				    		text='Include Kew "Plants of the World" Online Database'
				    		/>
				    	<CheckBox
				    		id="cbGenus"
				    		selected="false"
				    		text='Unknown Species, search for genus instead'
				    		/>			    	
			    	</VBox>
		    	</HBox>
	    		<Table id="tableFindSpeciesResults"
					inset="false"
					selectionChange="onFindSpeciesAdditionalNameLiveChange"
					updateFinished="onFindSpeciesAdditionalNameLiveChange"
					mode="SingleSelectLeft"
					items="{
						path: 'kewSearchResults>/ResultsCollection'
						}"
					>	
					<columns>
						<Column
							width="10em">
							<Text text="Name &amp; Source" />
						</Column>
						<Column
							width="8em">
							<Text text="IPNI (Int. Plant Name Index)" />
						</Column>
						<Column
							width="8em">
							<Text
								text="Genus &amp; Species" />
						</Column>
						<Column
							width="8em">
							<Text 
								text="Family &amp; Phylum"/>
						</Column>
						<Column
							minScreenWidth="Tablet"
							demandPopin="true"
							width="6em">
							<Text 
								text="Authors &amp; Publ. Year" />
						</Column>
						<Column
							minScreenWidth="Tablet"
							demandPopin="true"
							width="4em">
							<Text 
								text="is a Syn." />
						</Column>						
						<Column
							minScreenWidth="Tablet"
							demandPopin="true"
							width="16em">
							<Text 
								text="Synonyms" />
						</Column>
						<Column
							minScreenWidth="Tablet"
							demandPopin="true"
							width="16em">
							<Text 
								text="Distribution" />
						</Column>
					</columns>
					
					<items>
						<ColumnListItem>
							<cells>
								<ObjectIdentifier
									title="{kewSearchResults>name}"
									text="{
										parts: ['kewSearchResults>source',
												'kewSearchResults>count'],
										formatter: '.formatter.sourceAndCount'
										}"/>
								<Text
									text="{
										parts: ['kewSearchResults>fqId',
												'kewSearchResults>is_custom'],
										formatter: '.formatter.ipniOrCustomName'
										}"/>
								<ObjectIdentifier
									title="{kewSearchResults>genus}"
									text="{kewSearchResults>species}"/>
								<ObjectIdentifier
									title="{kewSearchResults>family}"
									text="{kewSearchResults>phylum}"/>
								<ObjectIdentifier
									title="{kewSearchResults>authors}"
									text="{kewSearchResults>namePublishedInYear}"/>
								<Text
									text="{kewSearchResults>synonym}"/>
								<Text
									text="{kewSearchResults>synonyms_concat}"/>
								<Text
									text="{kewSearchResults>distribution_concat}"/>
							</cells>
						</ColumnListItem>
					</items>		
				</Table>
				
		    	<Label
		    		text="{i18n>label_additional_species_name}"
		    		class="sapUiSmallMarginTop"/>
		    	<HBox
		    		class="sapUiSmallMargin">
		    		<Label
			    		text="Suffix"
			    		labelFor='inputFindSpeciesAdditionalName'
		    			class="sapUiTinyMarginEnd"/>
			    	<Input
			    		maxLength="40"
			    		width="15em"
			    		autocomplete="true" 
			    		liveChange="onFindSpeciesAdditionalNameLiveChange"
			    		id="inputFindSpeciesAdditionalName"
		    			class="sapUiSmallMarginEnd"/>
			    		
		    		<Label
			    		text="Final name"
			    		labelFor='textFindSpeciesAdditionalName'
		    			class="sapUiTinyMarginEnd"/>
			    	
			    	<GenericTag
			    		id="textFindSpeciesAdditionalName"
			    		design="StatusIconHidden" 
			    		status="Success"
			    		valueState="None"/>
	    		</HBox>
	    		
			</VBox>
	    </content>
	    
	    <beginButton>
		    <Button
	    		text="Assign &amp; Save"
            	press="onFindSpeciesChoose"/>
	    </beginButton>
	    
	    <endButton>
		    <Button
	    		text="Cancel"
            	press="onFindSpeciesCancelButton"/>
	    </endButton>
    </Dialog>
</core:FragmentDefinition>