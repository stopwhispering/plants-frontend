<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:f="sap.f"
	xmlns:card="sap.f.cards"
	xmlns:l="sap.ui.layout"
	xmlns:form="sap.ui.layout.form"
	xmlns:core="sap.ui.core">

	<VBox>
	
		<HBox
			items="{
				path: 'taxon>trait_categories',
				sorter : {
	            	path : 'sort_flag' 
	        	},
				templateShareable: false
				}">
			
			<items>
				<VBox
					class="sapUiTinyMarginEnd">
					
					<Label 
						text="{taxon>category_name}"/>
		
					<VBox
						items="{
							path: 'taxon>traits',
							templateShareable: false
							}"
						wrap="Wrap">
						<items>
							<ObjectStatus
								class="sapUiTinyMarginBottom"
								text="{taxon>trait}"
								state="{
									path: 'taxon>observed',
									formatter: '.formatter.objectStatusStateByObserved'
									}"
								inverted="true"
								active="true"
								press=".onPressTrait"
								/>										
						</items>
					</VBox>
				</VBox>
			
			</items>
			
		</HBox>
		
		<l:Grid
			visible="{status>/details_editable}"
			containerQuery="True"
			hSpacing="1"
			class="sapUiMediumMarginTop">
		<!--<HBox-->
		<!--	visible="{status>/details_editable}"-->
		<!--	class="sapUiMediumMarginTop">-->
			
			<Select
				id="newTraitCategory"
				forceSelection="true"
				items="{
					path: 'trait_categories>/TraitCategoriesCollection'
				}"
				width="100%"
				change="onChangeNewTraitCategory">
				
				<core:Item 
					key="{trait_categories>id}" 
					text="{trait_categories>category_name}" />
				<layoutData>
					<l:GridData span="XL2 L2 M2 S4"/>
				</layoutData>					
			</Select>
			
			<Input
				id="newTraitTrait"
				width="100%"
				visible="true"
				value=""
				editable="true"
				enabled="true"
				autocomplete="false"
				textAlign="Begin"
				type="Text"
				placeholder="{i18n>placeholderNewTraitTrait}"
				showSuggestion="true"
				showTableSuggestionValueHelp="false"
				liveChange="onLiveChangeNewTraitTrait"
				submit="onPressAddTrait"
				suggestionItems="{
					path: 'trait_categories>/TraitsCollection',
					templateShareable: false
					}">
				
				<suggestionItems>
					<core:Item text="{trait_categories>trait}"/>
				</suggestionItems>
				
				<layoutData>
					<l:GridData span="XL7 L6 M7 S8"/>
				</layoutData>				
				
			</Input>
				
			<CheckBox
				text="Observed"
				id="newTraitObserved">
				<layoutData>
					<l:GridData span="XL1 L2 M2 S5"/>
				</layoutData>				
			</CheckBox>
				
			<Button
				text="Add"
				icon="sap-icon://add-activity"
				type="Transparent"
				press="onPressAddTrait">
				<layoutData>
					<l:GridData span="XL1 L1 M1 S2"/>
				</layoutData>				
			</Button>
			
		<!--</HBox>-->
		</l:Grid>
	
	</VBox>

</core:FragmentDefinition>